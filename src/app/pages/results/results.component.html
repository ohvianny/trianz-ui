<app-header [item]="'resultados'"></app-header>

<div role="main" class="main">

    <section class="page-header page-header-classic page-header-sm" style="margin: 0px;background-color: #F38832;">
        <div class="container">
            <div class="row">
                <div class="col-md-8 order-2 order-md-1 align-self-center p-static">
                    <h1 data-title-border>Resultados</h1>
                </div>
            </div>
        </div>
    </section>

    <div class="container py-2">

        <div class="row">
            <div class="col-md-8 offset-md-4">
                <div class="overflow-hidden mb-1">
                    <h2 class="font-weight-normal text-7 mb-0">{{event.title}}</h2>
                </div>
                <div class="overflow-hidden mb-3">
                    <p>Tendrás hasta el día {{event.date2 | date:'dd/MM/yyyy' }} para registrar tus tiempos</p>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-3">
                <div class="row">
                    <div class="col-md-10">
                        <div class="overflow-hidden">
                            <h5 style="text-align: center;">Búsqueda General</h5>
                        </div>
                    </div>
                    <div class="form-group col-md-10">
                        <label class="font-weight-bold text-dark text-2 mb-0">Modalidad</label>
                        <select id="category" name="category" class="form-control" size="0"
                            style="height: calc(1.5em + .75rem + 2px);">
                            <option value="">Seleccionar</option>
                            <option value="all">Duatlon</option>
                            <option value="Elite Femenino">Triatlon</option>
                        </select>
                    </div>

                    <div class="form-group col-md-10">
                        <label class="font-weight-bold text-dark text-2 mb-0">Categoría</label>
                        <select id="category" name="category" class="form-control" size="0"
                            style="height: calc(1.5em + .75rem + 2px);">
                            <option value="">Seleccionar</option>
                            <option value="all">Todas</option>
                            <option value="Elite Femenino">Elite Femenino</option>
                            <option value="Elite Masculino">Elite Masculino</option>
                            <option value="Categoria">Categoría </option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="col-md-1" style="border-left: 2px solid #9999;"></div>

            <div class="col-md-4">
                <form role="form">
                    <div class="row">
                        <div class="col-md-10">
                            <div class="overflow-hidden">
                                <h5 style="text-align: center;">Búsqueda individual</h5>
                            </div>
                        </div>
                        <div class="form-group col-md-5">
                            <label class="font-weight-bold text-dark text-2 mb-0">Dorsal</label>
                            <input type="text" maxlength="7" class="form-control" [(ngModel)]="enrollmentId"
                                [ngModelOptions]="{standalone: true}">
                        </div>
                        <div class="form-group col-md-4">
                            <button type="button" class="btn btn-primary btn-modern" (click)="onSearchEnrollment()"
                                style="margin-top: 20px;">
                                Buscar
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="col-md-1" style="border-left: 2px solid #9999;"></div>

            <div class="col-md-3">
                <div class="row">
                    <div class="col-md-10">
                        <div class="overflow-hidden">
                            <h5 style="text-align: center;">Registrar tiempo</h5>
                        </div>
                    </div>

                    <div class="form-group col-md-12">
                        <button type="button" class="btn btn-primary btn-modern" style="margin-top: 15px;"
                            (click)="onRegisterTime()">
                            Registrar Nuevo Tiempo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" *ngIf="enrollments.length !== 0">
            <div class="col-md-12 mt-4">
                <div class="overflow-hidden mb-1">
                    <h4 class="color-primary font-weight-semibold text-4 text-uppercase mb-3"
                        style="text-align: center;">
                        Lista de Resultados </h4>
                </div>
                <table id="tenrollments" class="table table-striped" style="display: block;overflow: scroll;">
                    <thead>
                        <tr>
                            <th>Certificado</th>
                            <th>Pos. Gen.</th>
                            <th>Pos. Cat.</th>
                            <th>Dorsal</th>
                            <th>Nombre</th>
                            <th>Categoría</th>
                            <th>T. Total</th>
                            <th>T. Natación</th>
                            <th>T. Ciclismo</th>
                            <th>T. Carrera</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let enrollment of enrollments">
                            <td>-</td>
                            <td>{{enrollment.posGen}}</td>
                            <td>{{enrollment.posCat}}</td>
                            <td>{{enrollment.enrollmentId}}</td>
                            <td>{{enrollment.name}} {{enrollment.lastname}}</td>
                            <td>{{enrollment.category}}</td>
                            <td>{{enrollment.totalTime}}</td>
                            <td>{{enrollment.swimmingTime}}</td>
                            <td>{{enrollment.bikeTime}}</td>
                            <td>{{enrollment.walkTime}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="swal01-container swal2-center swal01-backdrop-show" *ngIf="!showModal">
            <div class="swal01-popup swal01-modal" role="dialog" style="display: flex;">
                <div class="swal01-header">
                    <h2 class="swal01-title">Registrar Nuevo Tiempo</h2>
                </div>
                <br>
                <div class="swal01-content">
                    <div class="row">
                        <div class="offset-3 col-3">
                            <div class="form-group ">
                                <label class="font-weight-bold text-dark text-2 mb-0">Dorsal</label>
                                <input type="text" id="enrollmentId" maxlength="7" class="form-control"
                                    [(ngModel)]="enrollmentId" (blur)="onBlur()" [ngModelOptions]="{standalone: true}">
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="form-group">
                                <label class="font-weight-bold text-dark text-2 mb-0">DNI</label>
                                <input type="text" id="dni" class="form-control" name="dni" [(ngModel)]="dni"
                                    maxlength="2" (blur)="onBlur()" [ngModelOptions]="{standalone: true}">
                            </div>
                        </div>
                        <div class="col-4"></div>
                        <div class="offset-2 col-8">
                            <label class="text-dark" style="font-size: 10px;">* Debes incluir los dos
                                últimos dígitos de tu DNI</label>
                        </div>
                        <div class="form-group col-md-12">
                            <table id="tenrollments" class="table table-striped mt-3"
                                style="font-size: 14px;font-weight: 400; display: block;overflow: scroll;">
                                <thead>
                                    <tr>
                                        <th>Tiempo</th>
                                        <th>Hra</th>
                                        <th>Min</th>
                                        <th>Seg</th>
                                        <th>Foto</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td *ngIf="duatlon == 'Duatlon'">Carrera</td>
                                        <td *ngIf="duatlon === 'Triatlon'">Natación</td>
                                        <td><input type="number" id="t11" min="0" max="15" class="form-control"
                                                [(ngModel)]="time.t11"></td>
                                        <td><input type="number" id="t12" min="0" max="59" class="form-control"
                                                [(ngModel)]="time.t12"></td>
                                        <td><input type="number" id="t13" min="0" max="59" class="form-control"
                                                [(ngModel)]="time.t13"></td>
                                        <td>
                                            <input type="file" id="t1file" name="myfile"
                                                style="font-size: xx-small;overflow: auto;" [(ngModel)]="time.t1file">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Ciclismo</td>
                                        <td><input type="number" id="t21" min="0" max="15" class="form-control"
                                                [(ngModel)]="time.t21"></td>
                                        <td><input type="number" id="t22" min="0" max="59" class="form-control"
                                                [(ngModel)]="time.t22"></td>
                                        <td><input type="number" id="t23" min="0" max="59" class="form-control"
                                                [(ngModel)]="time.t23"></td>
                                        <td>
                                            <input type="file" id="t2file" name="myfile"
                                                style="font-size: xx-small;overflow: auto;" [(ngModel)]="time.t2file">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Carrera</td>
                                        <td><input type="number" id="t31" min="0" max="15" class="form-control"
                                                [(ngModel)]="time.t31"></td>
                                        <td><input type="number" id="t32" min="0" max="59" class="form-control"
                                                [(ngModel)]="time.t32"></td>
                                        <td><input type="number" id="t33" min="0" max="59" class="form-control"
                                                [(ngModel)]="time.t33"></td>
                                        <td>
                                            <input type="file" id="t3file" name="myfile"
                                                style="font-size: xx-small;overflow: auto;" [(ngModel)]="time.t3file">
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div *ngIf="!validateTime">
                                <label style="font-size: 10px;color:#F44336">* Los tiempos deben
                                    estar entre 0 y 59</label>
                            </div>
                            <div class="offset-1">
                                <label class="text-dark" style="font-size: 10px;">* Los archivos deben ser en
                                    formato
                                    jpg,jpeg o png menor a 1 MB</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="swal01-actions">
                    <button type="button" class="btn btn-primary btn-modern" style="margin-right: 15px;"
                        (click)="onSaveRegisterTime()">Guardar</button>
                    <button type="button" class="btn btn-secondary btn-modern" (click)="closeModal()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

</div>

<app-footer></app-footer>